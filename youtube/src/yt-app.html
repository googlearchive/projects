<!--
/*
 * Copyright 2013 The Toolkitchen Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 */
-->
<link rel="import" href="../../../toolkit/components/g-app.html">
<link rel="import" href="../../../toolkit/components/g-panels.html">
<link rel="import" href="../../../toolkit/components/g-icon-button.html">
<link rel="import" href="../../../toolkit/components/g-toolbar.html">
<link rel="import" href="../../../toolkit/components/g-ajax.html">
<link rel="import" href="../../../toolkit/components/g-selector.html">
<link rel="import" href="../../../pantry/Speech/g-speech-mic.html"/>
<link rel="import" href="yt-videopanel.html">
<element name="yt-app" extends="g-app">
  <link rel="stylesheet" href="css/yt-app.css">
  <template>
    <g-ajax auto id="ajax" url="http://gdata.youtube.com/feeds/api/videos/" 
        params='{"alt":"json", "v":"2", "max-results":"50", "q":"{{query}}"}'
        handleAs="json" response="{{response}}">
    </g-ajax>
    <g-panels id="panels" transition="flow">
      <section id="listPanel">
        <g-toolbar>
          <input value="{{query}}" autofocus></input>
          <g-speech-mic transcript="{{query}}"></g-speech-mic>
        </g-toolbar>
        <g-selector class="list" on-activate="listToggle" selectedModel="{{selectedModel}}">
          <template repeat="{{response.feed.entry}}">
            <div class="item">{{title.$t}}</div>
          </template>
        </g-selector>
      </section>
      <yt-videopanel id="videoPanel" video="{{selectedModel}}">
        <g-icon-button class="left" src="images/menu.png" on-click="listToggle"></g-icon-button>
        <g-icon-button src="images/grid.png" on-click="moreToggle"></g-icon-button>
      </yt-videopanel>
      <section id="morePanel" class="right" on-click="moreToggle">
        More Stuff!
      </section>
    </g-panels>
  </template>
  <script>
    Toolkit.register(this, {
      query: 'chrome commercial',
      listToggle: function() {
        this.$.panels.toggleBetween('listPanel', 'videoPanel');
      },
      moreToggle: function() {
        this.$.panels.toggleBetween('morePanel', 'videoPanel');
      }
    });
  </script>
</element>
